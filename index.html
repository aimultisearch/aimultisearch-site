<script>
  (function () {
    var form = document.getElementById("waitlist-form");
    var emailInput = document.getElementById("email");
    var statusEl = document.getElementById("status");
    var submitBtn = document.getElementById("submit-btn");

    // IMPORTANT : ton Apps Script publiÃ© en "Anyone"
    var SCRIPT_URL =
      "https://script.google.com/macros/s/AKfycbxnnse0qeocYxPPShifKjHFQupGi4JVUQvKkA00YJRj_GK0YSslQenanU0qhaWNvFZpjg/exec";

    function setStatus(message, type) {
      statusEl.textContent = message || "";
      statusEl.className = "status-message" + (type ? " " + type : "");
    }

    function validateEmail(email) {
      return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    }

    form.addEventListener("submit", function (event) {
      event.preventDefault();
      setStatus("", "");

      var email = emailInput.value.trim();

      if (!email) {
        setStatus("Please enter your email address.", "error");
        emailInput.focus();
        return;
      }

      if (!validateEmail(email)) {
        setStatus("Please enter a valid email address.", "error");
        emailInput.focus();
        return;
      }

      submitBtn.disabled = true;
      submitBtn.textContent = "Sendingâ€¦";

      fetch(SCRIPT_URL, {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
        body: "email=" + encodeURIComponent(email),
      })
        .then(function () {
          emailInput.value = "";
          setStatus(
            "Thanks! Youâ€™ll be notified as soon as AI Multi Search launches ðŸŽ‰",
            "success"
          );
        })
        .catch(function () {
          setStatus(
            "Something went wrong. Please try again in a moment.",
            "error"
          );
        })
        .finally(function () {
          submitBtn.disabled = false;
          submitBtn.textContent = "Notify me at launch";
        });
    });
  })();
</script>
